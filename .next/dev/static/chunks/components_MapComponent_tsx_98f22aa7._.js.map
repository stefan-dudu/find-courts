{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefandudu/Desktop/find-courts/components/MapComponent.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport Map, { Marker, Popup } from \"react-map-gl/mapbox\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { useTranslation } from \"react-i18next\";\n\nconst MAPBOX_TOKEN = process.env.NEXT_PUBLIC_MAPBOX_TOKEN; \n\n\nconst MapComponent = () => {\n  const [courts, setCourts] = useState([]);\n  const [popupInfo, setPopupInfo] = useState<any>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    fetchCourts();\n  }, []);\n\n  const fetchCourts = async () => {\n    try {\n      const response = await fetch(process.env.NEXT_PUBLIC_COURT_GET_LINK || \"\");\n      const data = await response.json();\n      setCourts(data.body); // Adjusted to match your example response structure\n    } catch (error) {\n      console.error(\"Error fetching courts:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{ textAlign: \"center\", marginTop: \"20px\" }}>\n        <CircularProgress />\n        <p>{t(\"loading.mapInfo\")}</p>\n      </div>\n    );\n  }\n\n\n  return (\n    <div style={{ height: \"500px\", width: \"100%\" }}>\n      <Map\n        initialViewState={{\n          longitude: 26.10249131839039,\n          latitude: 44.42677583105836,\n          zoom: 10,\n        }}\n        // style={{ width: \"100%\", height: \"100%\" }}\n        style={{\n          position: \"relative\",\n          width: \"100%\",\n          height: \"70vh\",\n        }}\n        // mapStyle=\"mapbox://styles/mapbox/outdoors-v12\"\n        // mapStyle=\"mapbox://styles/stefan01-dev/cle6x947u005b01nojysmi80b\"\n        mapStyle=\"mapbox://styles/stefan01-dev/cm657r5k900c401sgbcuofev4\"\n        mapboxAccessToken={MAPBOX_TOKEN}\n      >\n        {courts.length > 0 &&\n          courts.map((court: any) => (\n            <Marker\n              key={court.courtID}\n              longitude={court.coordinates[1]}\n              latitude={court.coordinates[0]}\n              anchor=\"bottom\"\n              onClick={(e) => {\n                e.originalEvent.stopPropagation(); // Prevent map click from triggering\n                setPopupInfo(court);\n              }}\n            ></Marker>\n          ))}\n\n        {popupInfo && (\n          <Popup\n            longitude={popupInfo.coordinates[1]}\n            latitude={popupInfo.coordinates[0]}\n            anchor=\"top\"\n            onClose={() => setPopupInfo(null)}\n            closeOnClick={false}\n            offset={-15}\n          >\n            <div>\n              <h4>{popupInfo.courtName}</h4>\n              <p>\n                {t(\"map.noOfCourts\")} {popupInfo.courts.length}\n              </p>\n            </div>\n          </Popup>\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default MapComponent;"],"names":[],"mappings":";;;;AAQqB;;AANrB;AACA;AAAA;AAAA;AAEA;AACA;AAAA;;;AALA;;;;;;AAOA,MAAM;AAGN,MAAM,eAAe;;IACnB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAM;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAChD,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAE5B,IAAA,0KAAS;kCAAC;YACR;QACF;iCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,2GAA0C;YACvE,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,UAAU,KAAK,IAAI,GAAG,oDAAoD;QAC5E,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,OAAO;gBAAE,WAAW;gBAAU,WAAW;YAAO;;8BACnD,6LAAC,8LAAgB;;;;;8BACjB,6LAAC;8BAAG,EAAE;;;;;;;;;;;;IAGZ;IAGA,qBACE,6LAAC;QAAI,OAAO;YAAE,QAAQ;YAAS,OAAO;QAAO;kBAC3C,cAAA,6LAAC,2NAAG;YACF,kBAAkB;gBAChB,WAAW;gBACX,UAAU;gBACV,MAAM;YACR;YACA,4CAA4C;YAC5C,OAAO;gBACL,UAAU;gBACV,OAAO;gBACP,QAAQ;YACV;YACA,iDAAiD;YACjD,oEAAoE;YACpE,UAAS;YACT,mBAAmB;;gBAElB,OAAO,MAAM,GAAG,KACf,OAAO,GAAG,CAAC,CAAC,sBACV,6LAAC,4KAAM;wBAEL,WAAW,MAAM,WAAW,CAAC,EAAE;wBAC/B,UAAU,MAAM,WAAW,CAAC,EAAE;wBAC9B,QAAO;wBACP,SAAS,CAAC;4BACR,EAAE,aAAa,CAAC,eAAe,IAAI,oCAAoC;4BACvE,aAAa;wBACf;uBAPK,MAAM,OAAO;;;;;gBAWvB,2BACC,6LAAC,2KAAK;oBACJ,WAAW,UAAU,WAAW,CAAC,EAAE;oBACnC,UAAU,UAAU,WAAW,CAAC,EAAE;oBAClC,QAAO;oBACP,SAAS,IAAM,aAAa;oBAC5B,cAAc;oBACd,QAAQ,CAAC;8BAET,cAAA,6LAAC;;0CACC,6LAAC;0CAAI,UAAU,SAAS;;;;;;0CACxB,6LAAC;;oCACE,EAAE;oCAAkB;oCAAE,UAAU,MAAM,CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ9D;GArFM;;QAIU,qLAAc;;;KAJxB;uCAuFS","debugId":null}}]
}